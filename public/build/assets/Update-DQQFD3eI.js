import{d as V,T as q,l as f,k as E,q as R,c as Z,w as A,o as s,a as e,g,e as o,f as u,i as z,n as F,j as c,v as h,u as d,t as b,h as Y,F as $,x as G}from"./app-DoPaJPuH.js";import{_ as I}from"./AppLayout-DgNSrLQi.js";import"./vue-multiselect.esm-CnuB1ff5.js";import{S as k}from"./sweetalert2.esm.all-D3pEHXw3.js";const Q={class:"flex","aria-label":"Breadcrumb"},W={class:"inline-flex items-center space-x-1 md:space-x-3"},X={class:"inline-flex items-center"},ee=["href"],ae={class:"flex items-center"},te=["href"],ne={class:"py-12"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden sm:rounded-lg shadow-lg"},ie={class:"flex justify-between items-center px-6 py-4 bg-gray-100 border-b"},se={class:"relative"},oe={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10"},ue=["href"],de=["href"],me=["href"],pe=["href"],ke=["href"],ge=["href"],be=["href"],ce={key:0,class:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4"},ye={key:1,class:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4"},he={class:"flex gap-4 mb-5"},xe={class:"flex-1"},fe={key:0,class:"text-red-600 text-xs"},ve={class:"flex-1"},we={key:0,class:"text-red-600 text-xs"},_e={class:"mb-5"},Pe={key:0,class:"text-red-600 text-xs"},Be={class:"mb-5"},Se={key:0,class:"text-red-600 text-xs"},Ke={class:"mb-5"},Ce=["value","id"],je=["for"],Le={key:0,class:"text-red-500 text-sm"},Te={class:"flex items-center"},Ue=["disabled"],Je={__name:"Update",props:{errors:Object,applicant:Object,jenis_pengalaman_penyelia:Array,butiranPenyelia:Object,auth:Object},setup(n){var P,B,S,K,C,j;const r=n;V(["kerani","admin","Pegawai Perlulusan","Pegawai Penyemakan"]);const l=q({applicant_id:r.applicant.id,nama_penyelia:(P=r.butiranPenyelia)==null?void 0:P.nama_penyelia,kad_pengenalan_penyelia:(B=r.butiranPenyelia)==null?void 0:B.kad_pengenalan_penyelia,umur_penyelia:(S=r.butiranPenyelia)==null?void 0:S.umur_penyelia,kelulusan_akademik_penyelia:(K=r.butiranPenyelia)==null?void 0:K.kelulusan_akademik_penyelia,jenis_pengalaman_penyelia:((j=(C=r.butiranPenyelia)==null?void 0:C.pengalaman_penyelia)==null?void 0:j.map(t=>t.id))??[]}),x=V(!1),H=()=>{x.value=!x.value},J=()=>{k.fire({title:"Adakah anda ingin menyimpan perubahan?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Simpan",denyButtonText:"Jangan simpan"}).then(t=>{t.isConfirmed?(l.put(route("butiranpenyelia.update",r.butiranPenyelia.id),{errorBag:"updatePenyelia",preserveScroll:!0}),k.fire("Disimpan!","","success")):t.isDenied&&k.fire("Perubahan tidak disimpan","","info")})},y=f(()=>{var t,a,m;return((m=(a=(t=r.auth)==null?void 0:t.user)==null?void 0:a.role)==null?void 0:m.toLowerCase())==="kerani"&&r.applicant.status==="Perbaharui Lesen"}),p=f(()=>r.applicant.status==="Dalam Semakan"||r.applicant.status==="Dalam Proses Semakan"),v=f(()=>{var t,a,m;return((m=(a=(t=r.auth)==null?void 0:t.user)==null?void 0:a.role)==null?void 0:m.toLowerCase())==="kerani"&&r.applicant.status==="Borang Tidak Lengkap"}),N=()=>{k.fire({title:"Sahkan Selesai Perbaharui Lesen?",html:"Adakah anda sudah mengemaskini semua maklumat? <br><b>Jika belum, sila gunakan 'Pilih Halaman' untuk kemaskini.</b><br><br><span class='text-red-600'>Jika anda keluar dari halaman tanpa klik 'Kemaskini', perubahan tidak akan disimpan.</span>",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Selesai & Hantar",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&l.put(route("butiranpenyelia.update",r.butiranPenyelia.id),{preserveScroll:!0,onSuccess:()=>{axios.post(route("renew.complete",r.applicant.id)).then(()=>{k.fire("Berjaya!","Permohonan telah dihantar untuk semakan.","success").then(()=>window.location.href=route("applicant.index"))})}})})},M=()=>{k.fire({title:"Sahkan Simpan Kemaskini?",html:"Adakah anda sudah mengemaskini semua maklumat? <br><b>Jika belum, sila gunakan 'Pilih Halaman' untuk kemaskini.</b><br><br><span class='text-red-600'>Jika anda keluar dari halaman tanpa klik 'Kemaskini', perubahan tidak akan disimpan.</span>",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Simpan & Hantar",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&l.put(route("butiranpenyelia.update",r.butiranPenyelia.id),{preserveScroll:!0,onSuccess:()=>{k.fire("Berjaya!","Permohonan telah dihantar untuk semakan.","success").then(()=>window.location.href=route("applicant.index"))}})})};let w=!1;E(l,()=>{y.value&&(w=!0)},{deep:!0});const _=t=>{if(y.value&&w)return t.preventDefault(),t.returnValue="",""};return typeof window<"u"&&(window.addEventListener("beforeunload",_),R(()=>window.removeEventListener("beforeunload",_))),(t,a)=>(s(),Z(I,{title:"Tambah Penyelia Baru"},{header:A(()=>[a[8]||(a[8]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Kemaskini Pemohonan",-1)),a[9]||(a[9]=e("br",null,null,-1)),e("nav",Q,[e("ol",W,[e("li",X,[e("a",{href:t.route("dashboard"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},a[5]||(a[5]=[e("svg",{class:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})],-1),g(" Home ")]),8,ee)]),e("li",null,[e("div",ae,[a[6]||(a[6]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7.293 14.707a1 1 0 0 1 0-1.414L10.586 10 7.293 6.707a1 1 0 0 1 1.414-1.414l4 4a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414 0Z"})],-1)),e("a",{href:t.route("applicant.index"),class:"ml-1 text-sm font-medium text-gray-700 hover:text-gray-900 md:ml-2 dark:text-gray-400 dark:hover:text-white"},"Senarai Pemohon",8,te)])]),a[7]||(a[7]=e("li",{"aria-current":"page"},[e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7.293 14.707a1 1 0 0 1 0-1.414L10.586 10 7.293 6.707a1 1 0 0 1 1.414-1.414l4 4a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414 0Z"})]),e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"},"Kemaskini Pemohonan")])],-1))])])]),default:A(()=>{var m,L,T,U,D;return[e("div",ne,[e("div",re,[e("div",le,[e("div",ie,[a[12]||(a[12]=e("h3",{class:"text-lg font-semibold text-gray-700"},"Kemaskini Butiran Penyelia",-1)),e("div",se,[e("button",{onClick:H,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 focus:outline-none"}," Pilih Halaman "),x.value?(s(),o("div",oe,[e("a",{href:t.route("applicant.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Butiran Pemohon ",8,ue),e("a",{href:t.route("pengusaha.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Butiran Pengusaha ",8,de),e("a",{href:t.route("butirantaska.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Butiran Taman Asuhan Kanak-Kanak ",8,me),a[10]||(a[10]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Bilangan Kanak-Kanak ",-1)),a[11]||(a[11]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Butiran Bayaran Kanak ",-1)),e("a",{href:t.route("butiranpengurus.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Butiran Pengurus ",8,pe),e("a",{href:t.route("butiranpenyelia.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Butiran Penyelia ",8,ke),e("a",{href:t.route("maklumatpekerja.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Maklumat Pekerja ",8,ge),e("a",{href:t.route("dokumen.edit",n.applicant.id),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Dokumen Sokongan ",8,be)])):u("",!0)])]),y.value&&!p.value||v.value&&!p.value?(s(),o("div",ce,a[13]||(a[13]=[e("b",null,"Perhatian:",-1),g(" Sila pastikan anda klik "),e("b",null,"Kemaskini",-1),g(" untuk menyimpan perubahan. Jika anda keluar dari halaman atau ke halaman lain tanpa klik "),e("b",null,"Kemaskini",-1),g(", perubahan anda tidak akan disimpan."),e("br",null,null,-1),g(" Jika ada maklumat lain perlu dikemaskini, gunakan "),e("b",null,"Pilih Halaman",-1),g(" di atas. ")]))):u("",!0),p.value?(s(),o("div",ye," Permohonan sedang dalam proses semakan. Anda tidak boleh lagi mengemaskini maklumat. ")):u("",!0),e("form",{onSubmit:z(J,["prevent"]),class:F(["max-w-lg mx-auto py-10",{"pointer-events-none opacity-60":p.value}])},[e("div",he,[e("div",xe,[a[14]||(a[14]=e("label",{for:"nama_penyelia",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"(a) Nama",-1)),c(e("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>d(l).nama_penyelia=i),type:"text",id:"nama_penyelia",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[h,d(l).nama_penyelia]]),(m=n.errors)!=null&&m.nama_penyelia?(s(),o("div",fe,b(n.errors.nama_penyelia),1)):u("",!0)]),e("div",ve,[a[15]||(a[15]=e("label",{for:"kad_pengenalan_penyelia",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"(b) No. Kad Pengenalan",-1)),c(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>d(l).kad_pengenalan_penyelia=i),type:"text",id:"kad_pengenalan_penyelia",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[h,d(l).kad_pengenalan_penyelia]]),(L=n.errors)!=null&&L.kad_pengenalan_penyelia?(s(),o("div",we,b(n.errors.kad_pengenalan_penyelia),1)):u("",!0)])]),e("div",_e,[a[16]||(a[16]=e("label",{for:"umur_penyelia",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"(c) Umur",-1)),c(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>d(l).umur_penyelia=i),type:"text",id:"umur_penyelia",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[h,d(l).umur_penyelia]]),(T=n.errors)!=null&&T.umur_penyelia?(s(),o("div",Pe,b(n.errors.umur_penyelia),1)):u("",!0)]),e("div",Be,[a[17]||(a[17]=e("label",{for:"kelulusan_akademik_penyelia",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"(d) Kelulusan Akademik tertinggi",-1)),c(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>d(l).kelulusan_akademik_penyelia=i),type:"text",id:"confirm-password",class:"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[h,d(l).kelulusan_akademik_penyelia]]),(U=n.errors)!=null&&U.kelulusan_akademik_penyelia?(s(),o("div",Se,b(n.errors.kelulusan_akademik_penyelia),1)):u("",!0)]),e("div",Ke,[a[18]||(a[18]=e("label",{for:"jenis_pengalaman_penyelia",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"(f) Jenis Pengalaman ",-1)),e("div",null,[(s(!0),o($,null,Y(r.jenis_pengalaman_penyelia,i=>(s(),o("div",{key:i.id,class:"flex items-center mb-2"},[c(e("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=O=>d(l).jenis_pengalaman_penyelia=O),value:i.id,id:"jenis_pengalaman_"+i.id,class:"input-field"},null,8,Ce),[[G,d(l).jenis_pengalaman_penyelia]]),e("label",{for:"jenis_pengalaman_"+i.id,class:"ml-2 text-sm"},b(i.keterangan),9,je)]))),128))]),(D=n.errors)!=null&&D.jenis_pengalaman_penyelia?(s(),o("div",Le,b(n.errors.jenis_pengalaman_penyelia),1)):u("",!0)]),e("div",Te,[e("button",{type:"submit",disabled:p.value,class:"text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-purple-600 dark:hover:bg-blue-700 dark:focus:ring-purple-800"}," Kemaskini ",8,Ue),y.value&&!p.value?(s(),o("button",{key:0,type:"button",class:"ml-20 text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",onClick:N}," Selesai Perbaharui Lesen ")):u("",!0),v.value&&!p.value?(s(),o("button",{key:1,type:"button",class:"ml-20 text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",onClick:M}," Simpan Kemaskini ")):u("",!0)])],34)])])])]}),_:1}))}};export{Je as default};
